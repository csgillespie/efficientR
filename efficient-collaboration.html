<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Efficient R programming</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Efficient R programming.">
  <meta name="generator" content="bookdown 0.0.72 and GitBook 2.6.7">

  <meta property="og:title" content="Efficient R programming" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://csgillespie.github.io/efficientR/" />
  <meta property="og:image" content="https://csgillespie.github.io/efficientR/figures/full.png" />
  <meta property="og:description" content="Efficient R programming." />
  <meta name="github-repo" content="csgillespie/efficientR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Efficient R programming" />
  
  <meta name="twitter:description" content="Efficient R programming." />
  <meta name="twitter:image" content="https://csgillespie.github.io/efficientR/figures/full.png" />

<meta name="author" content="Colin Gillespie and Robin Lovelace">

<meta name="date" content="2016-06-09">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="hardware.html">
<link rel="next" href="efficient-learning.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Efficient R programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to Efficient R Programming</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#package-dependencies"><i class="fa fa-check"></i>Package Dependencies</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#who-this-book-is-for"><i class="fa fa-check"></i><b>1.1</b> Who this book is for</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-is-efficiency"><i class="fa fa-check"></i><b>1.2</b> What is efficiency?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#why-efficiency"><i class="fa fa-check"></i><b>1.3</b> Why efficiency?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#what-is-efficient-r-programming"><i class="fa fa-check"></i><b>1.4</b> What is efficient R programming?</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#touch-typing"><i class="fa fa-check"></i><b>1.5</b> Touch typing</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#benchmarking"><i class="fa fa-check"></i><b>1.6</b> Benchmarking</a><ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#benchmarking-example"><i class="fa fa-check"></i><b>1.6.1</b> Benchmarking example</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#profiling"><i class="fa fa-check"></i><b>1.7</b> Profiling</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="efficient-set-up.html"><a href="efficient-set-up.html"><i class="fa fa-check"></i><b>2</b> Efficient set-up</a><ul>
<li class="chapter" data-level="2.1" data-path="efficient-set-up.html"><a href="efficient-set-up.html#top-5-tips-for-an-efficient-r-set-up"><i class="fa fa-check"></i><b>2.1</b> Top 5 tips for an efficient R set-up</a></li>
<li class="chapter" data-level="2.2" data-path="efficient-set-up.html"><a href="efficient-set-up.html#operating-system"><i class="fa fa-check"></i><b>2.2</b> Operating system</a><ul>
<li class="chapter" data-level="2.2.1" data-path="efficient-set-up.html"><a href="efficient-set-up.html#operating-system-and-resource-monitoring"><i class="fa fa-check"></i><b>2.2.1</b> Operating system and resource monitoring</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="efficient-set-up.html"><a href="efficient-set-up.html#r-version"><i class="fa fa-check"></i><b>2.3</b> R version</a><ul>
<li class="chapter" data-level="2.3.1" data-path="efficient-set-up.html"><a href="efficient-set-up.html#installing-r"><i class="fa fa-check"></i><b>2.3.1</b> Installing R</a></li>
<li class="chapter" data-level="2.3.2" data-path="efficient-set-up.html"><a href="efficient-set-up.html#updating-r"><i class="fa fa-check"></i><b>2.3.2</b> Updating R</a></li>
<li class="chapter" data-level="2.3.3" data-path="efficient-set-up.html"><a href="efficient-set-up.html#installing-r-packages"><i class="fa fa-check"></i><b>2.3.3</b> Installing R packages</a></li>
<li class="chapter" data-level="2.3.4" data-path="efficient-set-up.html"><a href="efficient-set-up.html#deps"><i class="fa fa-check"></i><b>2.3.4</b> Installing R packages with dependencies</a></li>
<li class="chapter" data-level="2.3.5" data-path="efficient-set-up.html"><a href="efficient-set-up.html#updating-r-packages"><i class="fa fa-check"></i><b>2.3.5</b> Updating R packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="efficient-set-up.html"><a href="efficient-set-up.html#r-startup"><i class="fa fa-check"></i><b>2.4</b> R startup</a><ul>
<li class="chapter" data-level="2.4.1" data-path="efficient-set-up.html"><a href="efficient-set-up.html#r-startup-arguments"><i class="fa fa-check"></i><b>2.4.1</b> R startup arguments</a></li>
<li class="chapter" data-level="2.4.2" data-path="efficient-set-up.html"><a href="efficient-set-up.html#an-overview-of-rs-startup-files"><i class="fa fa-check"></i><b>2.4.2</b> An overview of R’s startup files</a></li>
<li class="chapter" data-level="2.4.3" data-path="efficient-set-up.html"><a href="efficient-set-up.html#the-location-of-startup-files"><i class="fa fa-check"></i><b>2.4.3</b> The location of startup files</a></li>
<li class="chapter" data-level="2.4.4" data-path="efficient-set-up.html"><a href="efficient-set-up.html#rprofile"><i class="fa fa-check"></i><b>2.4.4</b> The <code>.Rprofile</code> file</a></li>
<li class="chapter" data-level="2.4.5" data-path="efficient-set-up.html"><a href="efficient-set-up.html#an-example-.rprofile-file"><i class="fa fa-check"></i><b>2.4.5</b> An example <code>.Rprofile</code> file</a></li>
<li class="chapter" data-level="2.4.6" data-path="efficient-set-up.html"><a href="efficient-set-up.html#renviron"><i class="fa fa-check"></i><b>2.4.6</b> The <code>.Renviron</code> file</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="efficient-set-up.html"><a href="efficient-set-up.html#rstudio"><i class="fa fa-check"></i><b>2.5</b> RStudio</a><ul>
<li class="chapter" data-level="2.5.1" data-path="efficient-set-up.html"><a href="efficient-set-up.html#install-rstudio"><i class="fa fa-check"></i><b>2.5.1</b> Installing and updating RStudio</a></li>
<li class="chapter" data-level="2.5.2" data-path="efficient-set-up.html"><a href="efficient-set-up.html#window-pane-layout"><i class="fa fa-check"></i><b>2.5.2</b> Window pane layout</a></li>
<li class="chapter" data-level="2.5.3" data-path="efficient-set-up.html"><a href="efficient-set-up.html#exercises-3"><i class="fa fa-check"></i><b>2.5.3</b> Exercises</a></li>
<li class="chapter" data-level="2.5.4" data-path="efficient-set-up.html"><a href="efficient-set-up.html#rstudio-options"><i class="fa fa-check"></i><b>2.5.4</b> RStudio options</a></li>
<li class="chapter" data-level="2.5.5" data-path="efficient-set-up.html"><a href="efficient-set-up.html#autocompletion"><i class="fa fa-check"></i><b>2.5.5</b> Autocompletion</a></li>
<li class="chapter" data-level="2.5.6" data-path="efficient-set-up.html"><a href="efficient-set-up.html#keyboard-shortcuts"><i class="fa fa-check"></i><b>2.5.6</b> Keyboard shortcuts</a></li>
<li class="chapter" data-level="2.5.7" data-path="efficient-set-up.html"><a href="efficient-set-up.html#object-display-and-output-table"><i class="fa fa-check"></i><b>2.5.7</b> Object display and output table</a></li>
<li class="chapter" data-level="2.5.8" data-path="efficient-set-up.html"><a href="efficient-set-up.html#project-management"><i class="fa fa-check"></i><b>2.5.8</b> Project management</a></li>
<li class="chapter" data-level="2.5.9" data-path="efficient-set-up.html"><a href="efficient-set-up.html#exercises-4"><i class="fa fa-check"></i><b>2.5.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="efficient-set-up.html"><a href="efficient-set-up.html#blas-and-alternative-r-interpreters"><i class="fa fa-check"></i><b>2.6</b> BLAS and alternative R interpreters</a><ul>
<li class="chapter" data-level="2.6.1" data-path="efficient-set-up.html"><a href="efficient-set-up.html#testing-performance-gains-from-blas"><i class="fa fa-check"></i><b>2.6.1</b> Testing performance gains from BLAS</a></li>
<li class="chapter" data-level="2.6.2" data-path="efficient-set-up.html"><a href="efficient-set-up.html#revolution-r"><i class="fa fa-check"></i><b>2.6.2</b> Revolution R</a></li>
<li class="chapter" data-level="2.6.3" data-path="efficient-set-up.html"><a href="efficient-set-up.html#other-interpreters"><i class="fa fa-check"></i><b>2.6.3</b> Other interpreters</a></li>
<li class="chapter" data-level="2.6.4" data-path="efficient-set-up.html"><a href="efficient-set-up.html#useful-blasbenchmarking-resources"><i class="fa fa-check"></i><b>2.6.4</b> Useful BLAS/benchmarking resources</a></li>
<li class="chapter" data-level="2.6.5" data-path="efficient-set-up.html"><a href="efficient-set-up.html#exercises-5"><i class="fa fa-check"></i><b>2.6.5</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>3</b> Efficient programming</a><ul>
<li class="chapter" data-level="3.1" data-path="programming.html"><a href="programming.html#general-advice"><i class="fa fa-check"></i><b>3.1</b> General advice</a><ul>
<li class="chapter" data-level="3.1.1" data-path="programming.html"><a href="programming.html#memory-allocation"><i class="fa fa-check"></i><b>3.1.1</b> Memory allocation</a></li>
<li class="chapter" data-level="3.1.2" data-path="programming.html"><a href="programming.html#vectorised-code"><i class="fa fa-check"></i><b>3.1.2</b> Vectorised code</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#exercise-1"><i class="fa fa-check"></i>Exercise</a></li>
<li class="chapter" data-level="3.1.3" data-path="programming.html"><a href="programming.html#type-consistency"><i class="fa fa-check"></i><b>3.1.3</b> Type consistency</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="programming.html"><a href="programming.html#communicating-with-the-user"><i class="fa fa-check"></i><b>3.2</b> Communicating with the user</a><ul>
<li class="chapter" data-level="3.2.1" data-path="programming.html"><a href="programming.html#fatal-errors-stop"><i class="fa fa-check"></i><b>3.2.1</b> Fatal errors: <code class="unnumbered">stop</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="programming.html"><a href="programming.html#warnings-warning"><i class="fa fa-check"></i><b>3.2.2</b> Warnings: <code class="unnumbered">warning</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="programming.html"><a href="programming.html#informative-output-message-and-cat"><i class="fa fa-check"></i><b>3.2.3</b> Informative output: <code>message</code> and <code class="unnumbered">cat</code></a></li>
<li class="chapter" data-level="3.2.4" data-path="programming.html"><a href="programming.html#example-retrieving-a-web-resource"><i class="fa fa-check"></i><b>3.2.4</b> Example: Retrieving a web resource</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#exercises-8"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="3.2.5" data-path="programming.html"><a href="programming.html#invisible-returns"><i class="fa fa-check"></i><b>3.2.5</b> Invisible returns</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="programming.html"><a href="programming.html#factors"><i class="fa fa-check"></i><b>3.3</b> Factors</a><ul>
<li class="chapter" data-level="3.3.1" data-path="programming.html"><a href="programming.html#example-months-of-the-year"><i class="fa fa-check"></i><b>3.3.1</b> Example: Months of the year</a></li>
<li class="chapter" data-level="3.3.2" data-path="programming.html"><a href="programming.html#example-graphics"><i class="fa fa-check"></i><b>3.3.2</b> Example: Graphics</a></li>
<li class="chapter" data-level="3.3.3" data-path="programming.html"><a href="programming.html#example-analysis-of-variance"><i class="fa fa-check"></i><b>3.3.3</b> Example: Analysis of variance</a></li>
<li class="chapter" data-level="3.3.4" data-path="programming.html"><a href="programming.html#example-data-input"><i class="fa fa-check"></i><b>3.3.4</b> Example: data input</a></li>
<li class="chapter" data-level="3.3.5" data-path="programming.html"><a href="programming.html#example-factors-are-not-character-vectors"><i class="fa fa-check"></i><b>3.3.5</b> Example: Factors are not character vectors</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="programming.html"><a href="programming.html#S3"><i class="fa fa-check"></i><b>3.4</b> S3 objects</a></li>
<li class="chapter" data-level="3.5" data-path="programming.html"><a href="programming.html#caching-variables"><i class="fa fa-check"></i><b>3.5</b> Caching variables</a><ul>
<li class="chapter" data-level="3.5.1" data-path="programming.html"><a href="programming.html#function-closures"><i class="fa fa-check"></i><b>3.5.1</b> Function closures</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="programming.html"><a href="programming.html#the-byte-compiler"><i class="fa fa-check"></i><b>3.6</b> The byte compiler</a><ul>
<li class="chapter" data-level="3.6.1" data-path="programming.html"><a href="programming.html#example-the-mean-function"><i class="fa fa-check"></i><b>3.6.1</b> Example: the mean function</a></li>
<li class="chapter" data-level="3.6.2" data-path="programming.html"><a href="programming.html#compiling-code"><i class="fa fa-check"></i><b>3.6.2</b> Compiling code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="efficient-workflow.html"><a href="efficient-workflow.html"><i class="fa fa-check"></i><b>4</b> Efficient workflow</a><ul>
<li class="chapter" data-level="4.1" data-path="efficient-workflow.html"><a href="efficient-workflow.html#project-planning-and-management"><i class="fa fa-check"></i><b>4.1</b> Project planning and management</a><ul>
<li class="chapter" data-level="4.1.1" data-path="efficient-workflow.html"><a href="efficient-workflow.html#chunking-your-work"><i class="fa fa-check"></i><b>4.1.1</b> ‘Chunking’ your work</a></li>
<li class="chapter" data-level="4.1.2" data-path="efficient-workflow.html"><a href="efficient-workflow.html#smart"><i class="fa fa-check"></i><b>4.1.2</b> Making your workflow SMART</a></li>
<li class="chapter" data-level="4.1.3" data-path="efficient-workflow.html"><a href="efficient-workflow.html#visualising-plans-with-r"><i class="fa fa-check"></i><b>4.1.3</b> Visualising plans with R</a></li>
<li class="chapter" data-level="4.1.4" data-path="efficient-workflow.html"><a href="efficient-workflow.html#exercises-10"><i class="fa fa-check"></i><b>4.1.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="efficient-workflow.html"><a href="efficient-workflow.html#pkgs"><i class="fa fa-check"></i><b>4.2</b> Package selection</a><ul>
<li class="chapter" data-level="4.2.1" data-path="efficient-workflow.html"><a href="efficient-workflow.html#searching-for-r-packages"><i class="fa fa-check"></i><b>4.2.1</b> Searching for R packages</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="efficient-workflow.html"><a href="efficient-workflow.html#deciding-which-package-to-use"><i class="fa fa-check"></i><b>4.3</b> Deciding which package to use</a></li>
<li class="chapter" data-level="4.4" data-path="efficient-workflow.html"><a href="efficient-workflow.html#publication"><i class="fa fa-check"></i><b>4.4</b> Publication</a><ul>
<li class="chapter" data-level="4.4.1" data-path="efficient-workflow.html"><a href="efficient-workflow.html#dynamic-documents-with-knitr"><i class="fa fa-check"></i><b>4.4.1</b> Dynamic documents with knitr</a></li>
<li class="chapter" data-level="4.4.2" data-path="efficient-workflow.html"><a href="efficient-workflow.html#r-packages"><i class="fa fa-check"></i><b>4.4.2</b> R packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html"><i class="fa fa-check"></i><b>5</b> Efficient data carpentry</a><ul>
<li class="chapter" data-level="5.1" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#importing-data"><i class="fa fa-check"></i><b>5.1</b> Importing data</a><ul>
<li class="chapter" data-level="5.1.1" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#getting-data-from-the-internet"><i class="fa fa-check"></i><b>5.1.1</b> Getting data from the internet</a></li>
<li class="chapter" data-level="5.1.2" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#versatile-data-import-with-rio"><i class="fa fa-check"></i><b>5.1.2</b> Versatile data import with rio</a></li>
<li class="chapter" data-level="5.1.3" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#the-feather-file-format"><i class="fa fa-check"></i><b>5.1.3</b> The feather file format</a></li>
<li class="chapter" data-level="5.1.4" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#efficient-data-export-.rdata-or-.rds"><i class="fa fa-check"></i><b>5.1.4</b> Efficient data export: .Rdata or .Rds?</a></li>
<li class="chapter" data-level="5.1.5" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#a-benchmark-of-methods-for-file-import-and-export"><i class="fa fa-check"></i><b>5.1.5</b> A benchmark of methods for file import and export</a></li>
<li class="chapter" data-level="5.1.6" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#fread"><i class="fa fa-check"></i><b>5.1.6</b> Fast data reading</a></li>
<li class="chapter" data-level="5.1.7" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#preprocessing-outside-r"><i class="fa fa-check"></i><b>5.1.7</b> Preprocessing outside R</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#working-with-databases"><i class="fa fa-check"></i><b>5.2</b> Working with databases</a></li>
<li class="chapter" data-level="5.3" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#tidying-data-with-tidyr"><i class="fa fa-check"></i><b>5.3</b> Tidying data with tidyr</a></li>
<li class="chapter" data-level="5.4" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#dplyr"><i class="fa fa-check"></i><b>5.4</b> Data processing with dplyr</a><ul>
<li class="chapter" data-level="5.4.1" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#renaming-columns"><i class="fa fa-check"></i><b>5.4.1</b> Renaming columns</a></li>
<li class="chapter" data-level="5.4.2" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#changing-column-classes"><i class="fa fa-check"></i><b>5.4.2</b> Changing column classes</a></li>
<li class="chapter" data-level="5.4.3" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#filtering-rows"><i class="fa fa-check"></i><b>5.4.3</b> Filtering rows</a></li>
<li class="chapter" data-level="5.4.4" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#filtering-columns"><i class="fa fa-check"></i><b>5.4.4</b> Filtering columns</a></li>
<li class="chapter" data-level="5.4.5" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#data-aggregation"><i class="fa fa-check"></i><b>5.4.5</b> Data aggregation</a></li>
<li class="chapter" data-level="5.4.6" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#chaining-operations"><i class="fa fa-check"></i><b>5.4.6</b> Chaining operations</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="efficient-data-carpentry.html"><a href="efficient-data-carpentry.html#data-processing-with-data.table"><i class="fa fa-check"></i><b>5.5</b> Data processing with data.table</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="efficient-visualisation.html"><a href="efficient-visualisation.html"><i class="fa fa-check"></i><b>6</b> Efficient visualisation</a><ul>
<li class="chapter" data-level="6.1" data-path="efficient-visualisation.html"><a href="efficient-visualisation.html#rough-outline"><i class="fa fa-check"></i><b>6.1</b> Rough outline</a></li>
<li class="chapter" data-level="6.2" data-path="efficient-visualisation.html"><a href="efficient-visualisation.html#cairo-type"><i class="fa fa-check"></i><b>6.2</b> Cairo type</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="efficient-performance.html"><a href="efficient-performance.html"><i class="fa fa-check"></i><b>7</b> Efficient performance</a><ul>
<li class="chapter" data-level="7.1" data-path="efficient-performance.html"><a href="efficient-performance.html#efficient-base-r"><i class="fa fa-check"></i><b>7.1</b> Efficient base R</a><ul>
<li><a href="efficient-performance.html#the-if-vs-ifelse-functions">The <code>if</code> vs <code>ifelse</code> functions</a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#sorting-and-ordering"><i class="fa fa-check"></i>Sorting and ordering</a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#reversing-elements"><i class="fa fa-check"></i>Reversing elements</a></li>
<li><a href="efficient-performance.html#which-indices-are-true">Which indices are <code>TRUE</code>  </a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#converting-factors-to-numerics"><i class="fa fa-check"></i>Converting factors to numerics</a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#string-concatenation"><i class="fa fa-check"></i>String concatenation</a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#logical-and-and-or"><i class="fa fa-check"></i>Logical AND and OR</a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#row-and-column-operations"><i class="fa fa-check"></i>Row and column operations</a></li>
<li class="chapter" data-level="7.1.1" data-path="efficient-performance.html"><a href="efficient-performance.html#is.na-and-anyna"><i class="fa fa-check"></i><b>7.1.1</b> <code>is.na</code> and <code class="unnumbered">anyNA</code></a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#matrices"><i class="fa fa-check"></i>Matrices</a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#the-integer-data-type"><i class="fa fa-check"></i>The integer data type</a></li>
<li class="chapter" data-level="" data-path="efficient-performance.html"><a href="efficient-performance.html#sparse-matrices"><i class="fa fa-check"></i>Sparse matrices</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="efficient-performance.html"><a href="efficient-performance.html#code-profiling"><i class="fa fa-check"></i><b>7.2</b> Code profiling</a><ul>
<li class="chapter" data-level="7.2.1" data-path="efficient-performance.html"><a href="efficient-performance.html#getting-started-with-profvis"><i class="fa fa-check"></i><b>7.2.1</b> Getting started with <strong>profvis</strong></a></li>
<li class="chapter" data-level="7.2.2" data-path="efficient-performance.html"><a href="efficient-performance.html#example-monopoly-simulation"><i class="fa fa-check"></i><b>7.2.2</b> Example: Monopoly Simulation</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="efficient-performance.html"><a href="efficient-performance.html#parallel-computing"><i class="fa fa-check"></i><b>7.3</b> Parallel computing</a><ul>
<li class="chapter" data-level="7.3.1" data-path="efficient-performance.html"><a href="efficient-performance.html#parallel-versions-of-apply-functions"><i class="fa fa-check"></i><b>7.3.1</b> Parallel versions of apply functions</a></li>
<li class="chapter" data-level="7.3.2" data-path="efficient-performance.html"><a href="efficient-performance.html#example-snakes-and-ladders"><i class="fa fa-check"></i><b>7.3.2</b> Example: Snakes and Ladders</a></li>
<li class="chapter" data-level="7.3.3" data-path="efficient-performance.html"><a href="efficient-performance.html#exit-functions-with-care"><i class="fa fa-check"></i><b>7.3.3</b> Exit functions with care</a></li>
<li class="chapter" data-level="7.3.4" data-path="efficient-performance.html"><a href="efficient-performance.html#process-forking"><i class="fa fa-check"></i><b>7.3.4</b> Process forking</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="efficient-performance.html"><a href="efficient-performance.html#rcpp"><i class="fa fa-check"></i><b>7.4</b> Rcpp</a><ul>
<li class="chapter" data-level="7.4.1" data-path="efficient-performance.html"><a href="efficient-performance.html#pre-requisites"><i class="fa fa-check"></i><b>7.4.1</b> Pre-requisites</a></li>
<li class="chapter" data-level="7.4.2" data-path="efficient-performance.html"><a href="efficient-performance.html#simple-c"><i class="fa fa-check"></i><b>7.4.2</b> A simple C++ function</a></li>
<li class="chapter" data-level="7.4.3" data-path="efficient-performance.html"><a href="efficient-performance.html#cppfunction"><i class="fa fa-check"></i><b>7.4.3</b> The cppFunction command</a></li>
<li class="chapter" data-level="7.4.4" data-path="efficient-performance.html"><a href="efficient-performance.html#c-types"><i class="fa fa-check"></i><b>7.4.4</b> C++ data types</a></li>
<li class="chapter" data-level="7.4.5" data-path="efficient-performance.html"><a href="efficient-performance.html#sourcecpp"><i class="fa fa-check"></i><b>7.4.5</b> The <code>sourceCpp</code> function</a></li>
<li class="chapter" data-level="7.4.6" data-path="efficient-performance.html"><a href="efficient-performance.html#vectors-and-loops"><i class="fa fa-check"></i><b>7.4.6</b> Vectors and loops</a></li>
<li class="chapter" data-level="7.4.7" data-path="efficient-performance.html"><a href="efficient-performance.html#sugar"><i class="fa fa-check"></i><b>7.4.7</b> C++ with sugar on top</a></li>
<li class="chapter" data-level="7.4.8" data-path="efficient-performance.html"><a href="efficient-performance.html#rcpp-resources"><i class="fa fa-check"></i><b>7.4.8</b> Rcpp resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="hardware.html"><a href="hardware.html"><i class="fa fa-check"></i><b>8</b> Efficient hardware</a><ul>
<li class="chapter" data-level="8.1" data-path="hardware.html"><a href="hardware.html#top-5-tips-for-efficient-hardware"><i class="fa fa-check"></i><b>8.1</b> Top 5 tips for efficient hardware</a></li>
<li class="chapter" data-level="8.2" data-path="hardware.html"><a href="hardware.html#background-what-is-a-byte"><i class="fa fa-check"></i><b>8.2</b> Background: what is a byte?</a></li>
<li class="chapter" data-level="8.3" data-path="hardware.html"><a href="hardware.html#ram"><i class="fa fa-check"></i><b>8.3</b> Random access memory: RAM</a></li>
<li class="chapter" data-level="8.4" data-path="hardware.html"><a href="hardware.html#hard-drives-hdd-vs-ssd"><i class="fa fa-check"></i><b>8.4</b> Hard drives: HDD vs SSD</a></li>
<li class="chapter" data-level="8.5" data-path="hardware.html"><a href="hardware.html#operating-systems-32-bit-or-64-bit"><i class="fa fa-check"></i><b>8.5</b> Operating systems: 32-bit or 64-bit</a></li>
<li class="chapter" data-level="8.6" data-path="hardware.html"><a href="hardware.html#central-processing-unit-cpu"><i class="fa fa-check"></i><b>8.6</b> Central processing unit (CPU)</a></li>
<li class="chapter" data-level="8.7" data-path="hardware.html"><a href="hardware.html#cloud-computing"><i class="fa fa-check"></i><b>8.7</b> Cloud computing</a><ul>
<li class="chapter" data-level="8.7.1" data-path="hardware.html"><a href="hardware.html#amazon-ec2"><i class="fa fa-check"></i><b>8.7.1</b> Amazon EC2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html"><i class="fa fa-check"></i><b>9</b> Efficient Collaboration</a><ul>
<li class="chapter" data-level="9.1" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#coding-style"><i class="fa fa-check"></i><b>9.1</b> Coding style</a><ul>
<li class="chapter" data-level="9.1.1" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#reformatting-code-with-rstudio"><i class="fa fa-check"></i><b>9.1.1</b> Reformatting code with RStudio</a></li>
<li class="chapter" data-level="9.1.2" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#file-names"><i class="fa fa-check"></i><b>9.1.2</b> File names</a></li>
<li class="chapter" data-level="9.1.3" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#loading-packages"><i class="fa fa-check"></i><b>9.1.3</b> Loading packages</a></li>
<li class="chapter" data-level="9.1.4" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#commenting"><i class="fa fa-check"></i><b>9.1.4</b> Commenting</a></li>
<li class="chapter" data-level="9.1.5" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#object-names"><i class="fa fa-check"></i><b>9.1.5</b> Object names</a></li>
<li class="chapter" data-level="9.1.6" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#example-package"><i class="fa fa-check"></i><b>9.1.6</b> Example package</a></li>
<li class="chapter" data-level="9.1.7" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#assignment"><i class="fa fa-check"></i><b>9.1.7</b> Assignment</a></li>
<li class="chapter" data-level="9.1.8" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#spacing"><i class="fa fa-check"></i><b>9.1.8</b> Spacing</a></li>
<li class="chapter" data-level="9.1.9" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#indentation"><i class="fa fa-check"></i><b>9.1.9</b> Indentation</a></li>
<li class="chapter" data-level="9.1.10" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#curly-braces"><i class="fa fa-check"></i><b>9.1.10</b> Curly braces</a></li>
<li class="chapter" data-level="9.1.11" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#exercises-20"><i class="fa fa-check"></i><b>9.1.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#version-control"><i class="fa fa-check"></i><b>9.2</b> Version control</a></li>
<li class="chapter" data-level="9.3" data-path="efficient-collaboration.html"><a href="efficient-collaboration.html#refactoring"><i class="fa fa-check"></i><b>9.3</b> Refactoring</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="efficient-learning.html"><a href="efficient-learning.html"><i class="fa fa-check"></i><b>10</b> Efficient Learning</a><ul>
<li class="chapter" data-level="10.1" data-path="efficient-learning.html"><a href="efficient-learning.html#using-r-help"><i class="fa fa-check"></i><b>10.1</b> Using R Help</a></li>
<li class="chapter" data-level="10.2" data-path="efficient-learning.html"><a href="efficient-learning.html#reading-r-source-code"><i class="fa fa-check"></i><b>10.2</b> Reading R source code</a></li>
<li class="chapter" data-level="10.3" data-path="efficient-learning.html"><a href="efficient-learning.html#learning-online"><i class="fa fa-check"></i><b>10.3</b> Learning online</a><ul>
<li class="chapter" data-level="10.3.1" data-path="efficient-learning.html"><a href="efficient-learning.html#reproducible-example"><i class="fa fa-check"></i><b>10.3.1</b> Reproducible example</a></li>
<li class="chapter" data-level="10.3.2" data-path="efficient-learning.html"><a href="efficient-learning.html#minimal-data-set"><i class="fa fa-check"></i><b>10.3.2</b> Minimal data set</a></li>
<li class="chapter" data-level="10.3.3" data-path="efficient-learning.html"><a href="efficient-learning.html#minimal-example"><i class="fa fa-check"></i><b>10.3.3</b> Minimal example</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="efficient-learning.html"><a href="efficient-learning.html#online-resources"><i class="fa fa-check"></i><b>10.4</b> Online resources</a><ul>
<li class="chapter" data-level="10.4.1" data-path="efficient-learning.html"><a href="efficient-learning.html#stackoverflow"><i class="fa fa-check"></i><b>10.4.1</b> Stackoverflow</a></li>
<li class="chapter" data-level="10.4.2" data-path="efficient-learning.html"><a href="efficient-learning.html#mailing-lists-help-dev-package"><i class="fa fa-check"></i><b>10.4.2</b> Mailing lists: help, dev, package</a></li>
<li class="chapter" data-level="10.4.3" data-path="efficient-learning.html"><a href="efficient-learning.html#r-bloggers"><i class="fa fa-check"></i><b>10.4.3</b> r-bloggers</a></li>
<li class="chapter" data-level="10.4.4" data-path="efficient-learning.html"><a href="efficient-learning.html#twitter-rstats"><i class="fa fa-check"></i><b>10.4.4</b> twitter: <code>#rstats</code></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="efficient-learning.html"><a href="efficient-learning.html#conferences"><i class="fa fa-check"></i><b>10.5</b> Conferences</a><ul>
<li class="chapter" data-level="10.5.1" data-path="efficient-learning.html"><a href="efficient-learning.html#user"><i class="fa fa-check"></i><b>10.5.1</b> useR!</a></li>
<li class="chapter" data-level="10.5.2" data-path="efficient-learning.html"><a href="efficient-learning.html#local-groups"><i class="fa fa-check"></i><b>10.5.2</b> Local groups</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="efficient-learning.html"><a href="efficient-learning.html#code"><i class="fa fa-check"></i><b>10.6</b> Code</a></li>
<li class="chapter" data-level="10.7" data-path="efficient-learning.html"><a href="efficient-learning.html#look-at-the-source-code"><i class="fa fa-check"></i><b>10.7</b> Look at the source code</a><ul>
<li class="chapter" data-level="10.7.1" data-path="efficient-learning.html"><a href="efficient-learning.html#r-journal-and-journal-of-statistical-software"><i class="fa fa-check"></i><b>10.7.1</b> R-journal and Journal of Statistical Software</a></li>
<li class="chapter" data-level="10.7.2" data-path="efficient-learning.html"><a href="efficient-learning.html#the-manuals"><i class="fa fa-check"></i><b>10.7.2</b> The manuals</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://www.mas.ncl.ac.uk/~ncsg3/">Colin Gillespie</a>, Robin Lovelace</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Efficient R programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="efficient-collaboration" class="section level1">
<h1><span class="header-section-number">9</span> Efficient Collaboration</h1>
<!-- Comment on speech marks-->
<p>Large projects inevitably involve many people. This poses risks but also opportunities for improving computational efficiency and productivity, especially if project collaborators are reading and committing code. This chapter provides guidance on how to minimise the risks and maximise the benefits of collaborative R programming.</p>
<p>Collaborative working has a number of benefits. A team with a diverse skill set is usually stronger than a team with a very narrow focus. It makes sense to specialize: clearly defining roles such as statistician, front-end developer, system administrator and project manager will make your team stronger. Even if you are working alone, dividing the work into discrete branches in this way can be useful, as discussed in Chapter <a href="efficient-workflow.html#efficient-workflow">4</a>.</p>
<p>Collaborative programming provides an opportunity for people to review each other’s code. This can be encouraged by using a uniform style with many comments as described in Section <a href="efficient-collaboration.html#coding-style">9.1</a>. Like using a clear style in human language, following a style guide has the additional advantage of making your code more understandable to others.</p>
<p>When working on complex programming projects with multiple inter-dependencies version control is essential. Even on small projects tracking the progress of your project’s code-base has many advantages and makes collaboration much easier. Fortunately it is now easier than ever before to integrate version control into your project, using RStudio’s interface to the version control software <code>git</code> and online code sharing websites such as GitHub. This is the subject of Section <a href="efficient-collaboration.html#version-control">9.2</a>.</p>
<p>The final section, <a href="efficient-collaboration.html#refactoring">9.3</a>, addresses the question of how to respond when you find inefficient code. Refactoring is the process of re-writing poorly written or scripts so they are faster, more comprehensible, more portable and easier to maintain.</p>
<div id="coding-style" class="section level2">
<h2><span class="header-section-number">9.1</span> Coding style</h2>
<p>To be a successful programmer you need to use a consistent programming style. There is no single ‘correct’ style. To some extent good style is subjective and down to personal taste. There are, however, general principles that most programmers agree on, such as:</p>
<ul>
<li>Use modular code</li>
<li>Comment your code</li>
<li>Don’t Repeat Yourself (DRY)</li>
<li>Be concise, clear and consistent</li>
</ul>
<p>Good coding style will make you more efficient even if you are the only person who reads it. When your code is read by multiple readers or you are developing code with co-workers, having a consistent style is even more important. There are a number of R style guides online that are broadly similar, including one by <a href="https://google-styleguide.googlecode.com/svn/trunk/Rguide.xml">Google</a> and one by <a href="http://adv-r.had.co.nz/Style.html">Hadley Whickham</a>. The style followed in this book is based on a combination of Hadley Wickham’s guide and our own preferences (we follow Yihui Xie in preferring <code>=</code> to <code>&lt;-</code> for assignment, for example).</p>
<p>In-line with the principle of automation (automate any task that can save time by automating), the easiest way to improve your code is to ask your computer to do it, using RStudio.</p>
<div id="reformatting-code-with-rstudio" class="section level3">
<h3><span class="header-section-number">9.1.1</span> Reformatting code with RStudio</h3>
<p>RStudio can automatically clean up poorly indented and formatted code. To do this, select the lines that need to be formatted (e.g. via <code>Ctrl+A</code> to select the entire script) then automatically indent it with <code>Ctrl+I</code>. The shortcut <code>Ctrl+Shift+A</code> will reformat the code, adding spaces for maximum readability. An example is provided below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Poorly indented/formatted code</span>
if(!<span class="kw">exists</span>(<span class="st">&quot;x&quot;</span>)){
x=<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)
y=x[<span class="dv">2</span>]}</code></pre></div>
<p>This code chunk works but is not pleasant to read. RStudio automatically indents the code after the <code>if</code> statement as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Automatically indented code (Ctrl+I in RStudio)</span>
if(!<span class="kw">exists</span>(<span class="st">&quot;x&quot;</span>)){
  x=<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)
  y=x[<span class="dv">2</span>]}</code></pre></div>
<p>This is a start, but it’s still not easy to read. This can be fixed in RStudio as illustrated below (these options can be seen in the Code menu, accessed with <code>Alt+C</code> on Windows/Linux computers).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Automatically reformat the code (Ctrl+Shift+A in RStudio)</span>
if(!<span class="kw">exists</span>(<span class="st">&quot;x&quot;</span>)) {
  x =<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)
  y =<span class="st"> </span>x[<span class="dv">2</span>]
  }</code></pre></div>
<p>Note that some aspects of style are subjective: we would not leave a space after the <code>if</code> and <code>)</code>.</p>
<!-- Another way to automate R code formatting is with the **formatR** package. The example below shows the above steps of indenting and formatting undertaken with a single function call. -->
<!-- ```{r} -->
<!-- formatR::tidy_source(text = 'if(!exists("x")){ -->
<!-- x=c(3,5) -->
<!-- y=x[2]}') -->
<!-- ``` -->
</div>
<div id="file-names" class="section level3">
<h3><span class="header-section-number">9.1.2</span> File names</h3>
<p>File names should use the <code>.R</code> extension and should be lower case (e.g. <code>load.R</code>). Avoid spaces. Use a dash or underscore to separate words.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Good names</span>
<span class="kw">normalise.R</span>
<span class="kw">load.R</span>
<span class="co"># Bad names</span>
<span class="kw">Normalise.r</span>
<span class="kw">load</span> data.R</code></pre></div>
</div>
<div id="loading-packages" class="section level3">
<h3><span class="header-section-number">9.1.3</span> Loading packages</h3>
<p>Library function calls should be at the top of your script. When loading an essential package, use <code>library</code> instead of <code>require</code> since a missing package will then raise an error. If a package isn’t essential, use <code>require</code> and appropriately capture the warning raised. Package names should be surrounded with speech marks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good</span>
<span class="kw">library</span>(<span class="st">&quot;ggplot2&quot;</span>)
<span class="co"># Bad</span>
<span class="kw">library</span>(ggplot2)</code></pre></div>
<p>Avoid listing every package you may need, instead just include the packages you actually use. If you find that you are loading a large number of packages, consider putting all packages in a file called <code>packages.R</code> and using <code>source</code> appropriately.</p>
</div>
<div id="commenting" class="section level3">
<h3><span class="header-section-number">9.1.4</span> Commenting</h3>
<p>Avoid using plain English to explain standard R code</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Setting x equal to 1</span>
x =<span class="st"> </span><span class="dv">1</span></code></pre></div>
<p>Instead comments should explain at a higher level of abstraction the programmer’s intention <span class="citation">(McConnell <a href="#ref-Mcconnell2004">2004</a>)</span>. Each comment line should begin with a single hash (<code>#</code>), followed by a space. Comments can be toggled (turned on and off) in this way with <code>Ctl+Shift+C</code> in RStudio. The double hash (<code>##</code>) can be reserved for R output. If you follow your comment with four dashes (<code># ----</code>) RStudio will enable code folding until the next instance of this.</p>
</div>
<div id="object-names" class="section level3">
<h3><span class="header-section-number">9.1.5</span> Object names</h3>
<p>Function and variable names should be lower case, with an underscore <code>(_)</code> separating words. Unless you are creating an S3 object, avoid using a <code>.</code> in the name. Create names that are concise, but still have meaning.</p>
<p>In functions the required arguments should always be first, followed by optional arguments, with the special <code>...</code> argument coming last. If your argument has a boolean value, use <code>TRUE</code>/<code>FALSE</code> instead of <code>T</code>/<code>F</code> for clarity.</p>
<div class="rmdwarning">
<p>
It’s tempting to use <code>T</code>/<code>F</code> as shortcuts. But it is easy to accidently redefine these variables, e.g. <code>F = 10</code>. R raises an error if you try to redefine <code>TRUE</code>/<code>FALSE</code>
</p>
</div>
<p>While it’s possible to write arguments that depend on other arguments, try to avoid using this idiom as it makes understanding the default behaviour harder to understand. Typically it’s easier to set an argument to have a default value of <code>NULL</code> and check its value using <code>is.null</code> than by using <code>missing</code>. Avoid using names of existing functions. Do not, for example, use <code>data</code> as a variable name.</p>
</div>
<div id="example-package" class="section level3">
<h3><span class="header-section-number">9.1.6</span> Example package</h3>
<p>The <code>lubridate</code> package is a good example of a package that has a consistent naming system, to make it easy for users to guess its features and behaviour. Dates are encoded in a variety of ways, but the <code>lubridate</code> package has a neat set of functions consisting of the three letters, <strong>y</strong>ear, <strong>m</strong>onth and <strong>d</strong>ay. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;lubridate&quot;</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: &#39;lubridate&#39;</span>
<span class="co">#&gt; The following objects are masked from &#39;package:data.table&#39;:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     hour, mday, month, quarter, wday, week, yday, year</span>
<span class="co">#&gt; The following object is masked from &#39;package:base&#39;:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date</span>
<span class="kw">ymd</span>(<span class="st">&quot;2012-01-02&quot;</span>)
<span class="kw">dmy</span>(<span class="st">&quot;02-01-2012&quot;</span>)
<span class="kw">mdy</span>(<span class="st">&quot;01-02-2012&quot;</span>)</code></pre></div>
</div>
<div id="assignment" class="section level3">
<h3><span class="header-section-number">9.1.7</span> Assignment</h3>
<p>The two most common ways of assigning objects to values in R is with <code>&lt;-</code> and <code>=</code>. In most (but not all) contexts, they can be used interchangeably. Regardless of which operator you prefer, consistency is key, particularly when working in a group. In this book we use the <code>=</code> operator for assignment, as it’s faster to type and more consistent with other languages.</p>
<p>The one place where a difference occurs is during function calls. Consider the following piece of code used for timing random number generation</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(expr1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="fl">10e5</span>))
<span class="kw">system.time</span>(<span class="dt">expr2 =</span> <span class="kw">rnorm</span>(<span class="fl">10e5</span>)) <span class="co"># error</span></code></pre></div>
<p>The first lines will run correctly <strong>and</strong> create a variable called <code>expr1</code>. The second line will raise an error. When we use <code>=</code> in a function call, it changes from an <em>assignment</em> operator to an <em>argument passing</em> operator. For further information about assignment, see <code>?assignOps</code>.</p>
<p>To prevent <code>=</code> being interpreted as an argument passing operator, you can enclose the function call in curly braces:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>({expr3 =<span class="st"> </span><span class="kw">rnorm</span>(<span class="fl">10e5</span>)}) 
<span class="co">#&gt;    user  system elapsed </span>
<span class="co">#&gt;   0.120   0.000   0.119</span></code></pre></div>
</div>
<div id="spacing" class="section level3">
<h3><span class="header-section-number">9.1.8</span> Spacing</h3>
<p>Consistent spacing is an easy way of making your code more readable. Even a simple command such as <code>x = x + 1</code> takes a bit more time to understand when the spacing is removed, i.e. <code>x=x+1</code>. You should add a space around the operators <code>+</code>, <code>-</code>, <code>\</code> and <code>*</code>. Include a space around the assignment operators, <code>&lt;-</code> and <code>=</code>. Additionally, add a space around any comparison operators such as <code>==</code> and <code>&lt;</code>. The latter rule helps avoid bugs</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bug. x now equals 1</span>
x[x&lt;-<span class="dv">1</span>]
<span class="co"># Correct. Selecting values less than -1</span>
x[x &lt;<span class="st"> </span>-<span class="dv">1</span>]</code></pre></div>
<p>The exceptions to the space rule are <code>:</code>, <code>::</code> and <code>:::</code>, as well as <code>$</code> and <code>@</code> symbols for selecting sub-parts of objects. As with English, add a space after a comma, e.g.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cpu_speed[year &gt;<span class="st"> </span><span class="dv">1990</span>, ]</code></pre></div>
</div>
<div id="indentation" class="section level3">
<h3><span class="header-section-number">9.1.9</span> Indentation</h3>
<p>Use two spaces to indent code. Never mix tabs and spaces. RStudio can automatically convert the tab character to spaces (see <code>Tools -&gt; Global options -&gt; Code</code>).</p>
</div>
<div id="curly-braces" class="section level3">
<h3><span class="header-section-number">9.1.10</span> Curly braces</h3>
<p>Consider the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bad style, fails</span>
if(x &lt;<span class="st"> </span><span class="dv">5</span>)
{ 
y} 
else {
  x}</code></pre></div>
<p>Typing this straight into R will result in an error. An opening curly brace, <code>{</code> should not go on its own line and should always be followed by a line break. A closing curly brace should always go on its own line (unless it’s followed by an <code>else</code>, in which case the <code>else</code> should go on its own line). The code inside a curly braces should be indented (and RStudio will enforce this rule), as shown below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Good style</span>
if(x &lt;<span class="st"> </span><span class="dv">5</span>){
  x
} else {
  y
}
<span class="co">#&gt; [1] 1</span></code></pre></div>
<p>Be consistent with one line control statements. Some people prefer to avoid using braces:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># No braces</span>
if(x &lt;<span class="st"> </span><span class="dv">5</span>)
  x else
    y
<span class="co">#&gt; [1] 1</span></code></pre></div>
</div>
<div id="exercises-20" class="section level3">
<h3><span class="header-section-number">9.1.11</span> Exercises</h3>
<p>Look at the difference between your style and RStudio’s based on a representative R script that you have written (see Section <a href="efficient-collaboration.html#coding-style">9.1</a>). What are the similarities? What are the differences? Are you consistent? Write these down and think about how you can use the results to improve your coding style.</p>
</div>
</div>
<div id="version-control" class="section level2">
<h2><span class="header-section-number">9.2</span> Version control</h2>
</div>
<div id="refactoring" class="section level2">
<h2><span class="header-section-number">9.3</span> Refactoring</h2>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Mcconnell2004">
<p>McConnell, Steve. 2004. <em>Code Complete</em>. Pearson Education.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hardware.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="efficient-learning.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/csgillespie/efficientR/edit/master/09-collaboration.Rmd",
"text": "Edit"
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
